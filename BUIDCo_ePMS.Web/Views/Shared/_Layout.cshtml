<!DOCTYPE html>
@using Microsoft.AspNetCore.Http;
@inject IHttpContextAccessor HttpContextAccessor
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="BUIDCO Website">
    <meta name="keywords" content="BUIDCO Website">
    <title> Project Monitoring & Finance Management System </title>
    <link rel="shortcut icon" href="~/images/favicon.ico" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
    <link rel="stylesheet" type="text/css" href="~/css/custom-icons.css">
    <link rel="stylesheet" type="text/css" href="~/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="~/css/animate.css">
    <link rel="stylesheet" type="text/css" href="~/css/datatables.css">
    <link rel="stylesheet" type="text/css" href="~/css/jquery-ui-datepicker.css">
    <link rel="stylesheet" type="text/css" href="~/css/style.css">
    <script src="~/js/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.js"></script>
</head>

<body>

    <!-- Loader starts-->
    <div class="loader-wrapper">
        <div class="loader"></div>
    </div>
    <!-- Loader ends-->
    <div class="page-wrapper" id="pageWrapper">

        <!-- Page top Header Start-->
        <div class="page-header">
            <div class="header-wrapper row">
                <nav class="navbar navbar-expand navbar-light navbar-bg p-0">
                    <div class="dasboard__logo">
                        <a href="~/Dashboard/DashboardLanding" class="d-flex align-items-center gap-2" title="Project Monitoring & Finance Management System">
                            <img src="~/images/logo.png" alt="BUIDCO Logo">
                            <div class="d-block">
                                <h4> Project Monitoring & Finance Management System </h4>
                            </div>
                        </a>
                        <div class="toggle-sidebar" title="Menu Bar">
                            <img src="~/images/svg/menu-bar.svg" class="img-fluid h-auto" alt="Menu Icon">
                        </div>
                        <span class="fs-5 fw-500 d-none d-lg-flex" id="splayoutheader">
                            @*Upload Proposal*@
                        </span>
                    </div>
                    <div class="nav-right col-auto pull-right right-header p-0 ms-auto">
                        <div class="navbar-collapse collapse d-none d-lg-flex">
                            <ul class="navbar-nav navbar-align d-flex align-items-center d-none d-lg-flex">
                                <li class="nav-item d-flex align-items-center">
                                    <div class="search__container">
                                        <a href="#" class="nav-link d-sm-inline-flex" aria-expanded="false" id="searchIcon">
                                            <div class="top_menu_icon search__icon">
                                                <i class="bi bi-search"></i>
                                            </div>
                                        </a>
                                    </div>
                                </li>
                                <li class="nav-item dropdown d-flex align-items-center border-start notifications">
                                    <a href="#" data-bs-toggle="dropdown" class="nav-link d-sm-inline-flex" aria-expanded="false">
                                        <div class="top_menu_icon">
                                            <span>
                                                <i class="bi bi-bell"></i>
                                            </span>
                                        </div>
                                    </a>
                                    <div class="dropdown-menu shadow border-0">
                                        <div class="card">
                                            <div class="card-header border-bottom">
                                                <div class="d-flex align-items-center justify-content-between">
                                                    <div class="fw-600 text-solid-black fs-5"> Notifications </div>
                                                    <div> <span class="badge bg-danger text-white ms-3"> 40 +More </span> </div>
                                                </div>
                                            </div>
                                            <div class="card-body">
                                                <div class="dropdown-item">
                                                    <p> Lorem Ipsum is simply dummy text of the printing and typesetting industry. </p>
                                                    <small class="text-secondary"> <i class="buidcoicon-calendar-day me-1"></i> 05-02-2025 </small>
                                                </div>
                                                <div class="dropdown-item">
                                                    <p> Lorem Ipsum is simply dummy text of the printing and typesetting industry. </p>
                                                    <small class="text-secondary"> <i class="buidcoicon-calendar-day me-1"></i> 05-02-2025 </small>
                                                </div>
                                                <div class="dropdown-item">
                                                    <p> Lorem Ipsum is simply dummy text of the printing and typesetting industry. </p>
                                                    <small class="text-secondary"> <i class="buidcoicon-calendar-day me-1"></i> 05-02-2025 </small>
                                                </div>
                                                <div class="dropdown-item">
                                                    <p> Lorem Ipsum is simply dummy text of the printing and typesetting industry. </p>
                                                    <small class="text-secondary"> <i class="buidcoicon-calendar-day me-1"></i> 05-02-2025 </small>
                                                </div>
                                                <div class="dropdown-item">
                                                    <p> Lorem Ipsum is simply dummy text of the printing and typesetting industry. </p>
                                                    <small class="text-secondary"> <i class="buidcoicon-calendar-day me-1"></i> 05-02-2025 </small>
                                                </div>
                                            </div>
                                            <div class="card-footer">
                                                <div class="dropdown-item">
                                                    <a href="#" class="btn btn-primary w-100"> View Notifications </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li class="nav-item dropdown d-flex align-items-center border-start">
                                    <a href="#" data-bs-toggle="dropdown" class="nav-link d-sm-inline-flex avatar dropdown-toggle" aria-expanded="false">
                                        <img src="~/images/profile.png" alt="User-pic" class="img-fluid rounded-circle me-3">
                                        <p class="mb-0 lh-sm d-none d-sm-block">
                                            <small class="d-block">Welcome</small>
                                            <span class="fw-500 text-dark"> Adminstrator </span>
                                        </p>
                                    </a>
                                    <div class="dropdown-menu shadow border-0">
                                        <a href="javascript:void(0);" class="dropdown-item">
                                            <i class="bi bi-person me-2"></i> View
                                            Profile
                                        </a>
                                        <a href="~/CodeGenLogin/ChangePassword" class="dropdown-item">
                                            <i class="bi bi-key me-2"></i> Change
                                            Password
                                        </a>
                                        <a href="javascript:void(0);" onclick="logout()" class="dropdown-item"><i class="bi bi-box-arrow-right me-2"></i> Logout</a>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>
            </div>
        </div>
        <!-- Page top Header Ends-->



        <div class="body-wrapper">

            <!-- Page Sidebar Start-->
            <div class="sidebar-wrapper">
                <nav class="sidebar-main" id="sidebar-menu">
                    <ul class="sidebar-links">
                        @*@await Component.InvokeAsync("AllSurveysAdmin")*@
                        <li class="sidebar-list">
                            <a class="sidebar-link sidebar-title" href="~/Dashboard/DashboardLanding" title="Dashboard">
                                <i class="buidcoicon-monitor"></i>
                            </a>
                        </li>

                        <li class="sidebar-list">
                            <a class="sidebar-link sidebar-title" href="javascript:void(0)" title="Master">
                                <i class="buidcoicon-user-setting"></i>
                            </a>
                            <!-- right sidebar menu -->
                            <ul class="sidebar-submenu">
                                <li class="close__menu__icons"> <a href="#" title="Close" onclick="closeMobMenu()"> <i class="bi bi-x"></i> </a> </li>
                                <li class="sidebar-head"> Master </li>
                                <li class="right__sidebar__content">
                                    <ul>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="@Url.Action("FinancialYearMaster", "Master" )">
                                                Financial Year
                                            </a>
                                        </li>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="@Url.Action("ProjectCategoryMaster", "Master" )">
                                                Project Category
                                            </a>
                                        </li>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="@Url.Action("ProjectSubcategory", "Master" )">
                                                Project SubCategory
                                            </a>
                                        </li>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="@Url.Action("ProjectTypeMaster", "Master" )">
                                                Project Type
                                            </a>
                                        </li>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="@Url.Action("MileStoneMaster", "Master" )">
                                                MileStone
                                            </a>
                                        </li>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="@Url.Action("SubMilestoneMaster", "Master" )">
                                                Sub Milestone
                                            </a>
                                        </li>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="@Url.Action("SchemeMaster", "Master")">
                                                Scheme
                                            </a>
                                        </li>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="@Url.Action("ClientMaster", "Master")">
                                                Client
                                            </a>
                                        </li>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="@Url.Action("AddProcess", "Processflow")">
                                                ProcessFlow
                                            </a>
                                        </li>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="@Url.Action("AddDocument", "Master", new { Glink = 2, Plink = 2 })">
                                                AddDocument
                                            </a>

                                        </li>
                                        @*<li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="@Url.Action("AddDocument", "Master", new { Glink = 2, Plink = 2 })">
                                                ProcessDocument
                                            </a>

                                        </li>*@
                                    </ul>
                                </li>
                            </ul>
                            <!-- right sidebar menu -->
                        </li>

                        <li class="sidebar-list">
                            <a class="sidebar-link sidebar-title" href="javascript:void(0)" title="Construction Steps">
                                <i class="buidcoicon-construction"></i>
                            </a>
                            <!-- right sidebar menu -->
                            <ul class="sidebar-submenu">

                                <li class="close__menu__icons"> <a href="#" title="Close" onclick="closeMobMenu()"> <i class="bi bi-x"></i> </a> </li>

                                <li class="sidebar-head">Construction Steps </li>
                                <li class="right__sidebar__content">
                                    <ul>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="~/Proposal/CreateProposal">
                                                Upload Proposal
                                            </a>
                                        </li>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="~/TechnicalApproval/TechnicalApproval">
                                                Technical Approval
                                            </a>
                                        </li>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="~/AdministartiveApproval/AdministrativeList">
                                                Administrative Approval
                                            </a>
                                        </li>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="~/TechnicalSanctionApproval/SanctionApprovalView">
                                                Technical Sanction Approval
                                            </a>
                                        </li>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="~/CreateProject/CreateProjectView">
                                                Create Project
                                            </a>
                                        </li>
                                        <li class="main-submenu dropdown">
                                            <a class="d-flex sidebar-menu" href="javascript:void(0)">
                                                BOQ
                                            </a>
                                            <ul class="submenu-wrapper">
                                                <li><a href="~/BOQ/BoqComponentView">Add Component / Sub-Component</a></li>
                                                <li><a href="~/BOQ/ParticularsView">Add Particulars</a></li>
                                            </ul>
                                        </li>
                                        <li class="main-submenu dropdown">
                                            <a class="d-flex sidebar-menu" href="javascript:void(0)">
                                                Tender
                                            </a>
                                            <ul class="submenu-wrapper">
                                                <li><a href="~/Tender/NewTenderView"> New Tender </a></li>
                                                <li><a href="~/PreBidQueries/PreBidQueryView">Pre-Bid Queries </a></li>
                                                <li><a href="~/Bidders/BiddersView"> Bidders </a></li>
                                                <li><a href="~/TechnicalBid/TechnicalBidView"> Technical Bid </a></li>
                                                <li><a href="~/FinancialBid/FinancialBidView"> Financial Bid </a></li>
                                            </ul>
                                        </li>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="~/AssignProject/AssignProjectView">
                                                Assign Project (Work Order)
                                            </a>
                                        </li>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="~/Milestone/MilestoneView">
                                                Add Milestone
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            <!-- right sidebar menu -->
                        </li>

                        <li class="sidebar-list">
                            <a class="sidebar-link sidebar-title" href="javascript:void(0)" title="Project Monitoring">
                                <i class="buidcoicon-desktop"></i>
                            </a>
                            <!-- right sidebar menu -->
                            <ul class="sidebar-submenu">
                                <li class="close__menu__icons"> <a href="#" title="Close" onclick="closeMobMenu()"> <i class="bi bi-x"></i> </a> </li>
                                <li class="sidebar-head"> Project Monitoring </li>
                                <li class="right__sidebar__content">
                                    <ul>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="javascript:void(0)">
                                                Measurement Book
                                            </a>
                                        </li>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="javascript:void(0)">
                                                Work Progress
                                            </a>
                                        </li>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="javascript:void(0)">
                                                Project Header
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            <!-- right sidebar menu -->
                        </li>

                        <li class="sidebar-list">
                            <a class="sidebar-link sidebar-title" href="javascript:void(0)" title="Fund Management">
                                <i class="buidcoicon-money-bag"></i>
                            </a>
                            <!-- right sidebar menu -->
                            <ul class="sidebar-submenu">
                                <li class="close__menu__icons"> <a href="#" title="Close" onclick="closeMobMenu()"> <i class="bi bi-x"></i> </a> </li>
                                <li class="sidebar-head"> Fund Management </li>
                                <li class="right__sidebar__content">
                                    <ul>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="javascript:void(0)">
                                                Generate RA Bill
                                            </a>
                                        </li>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="javascript:void(0)">
                                                Payment Details
                                            </a>
                                        </li>
                                        <li class="main-submenu">
                                            <a class="d-flex sidebar-menu" href="javascript:void(0)">
                                                Upload Invoice
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            <!-- right sidebar menu -->
                        </li>

                        <li class="sidebar-list">
                            <a class="sidebar-link sidebar-title" title="" href="#!">
                                <i class="buidcoicon-column-chart"></i>
                            </a>
                        </li>

                        <li class="sidebar-list">
                            <a class="sidebar-link sidebar-title" title="" href="#!">
                                <i class="buidcoicon-file"></i>
                            </a>
                        </li>


                        <li class="sidebar-list">
                            <a class="sidebar-link sidebar-title" title="Query Management" href="~/Query/QueryManagement">
                                <i class="buidcoicon-question"></i>
                            </a>
                        </li>

                        <li class="sidebar-list">
                            <a class="sidebar-link sidebar-title" title="Raise Ticket" href="~/RaiseTicket/RaiseTicketlist">
                                <i class="buidcoicon-raise-ticket"></i>
                            </a>
                        </li>

                    </ul>


                </nav>
            </div>
            <!-- Page Sidebar Ends-->
            <!-- inner body content -->

            <div class="inner__bodylayout">
                @RenderBody()
            </div>

            <!-- inner body content -->
            <!-- footer start-->
            <footer class="footer">
                <div class="footer-copyright text-center">
                    <p class="mb-0"> © 2025 Project Monitoring & Finance Management System, All Rights Reserved. </p>
                </div>
            </footer>
        </div>
    </div>


    <script src="~/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/animation/wow/wow.min.js"></script>
    <script src="~/js/jquery.ui.min.js"></script>
    <script src="~/js/datatable/datatables/jquery.dataTables.min.js"></script>
    <script src="~/js/sidebar-menu.js"></script>
    <script src="~/js/sweetalert.min.js"></script>
    <!-- LightGallery CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/1.8.1/css/lightgallery.min.css">

  <!-- LightGallery JS -->
  <!-- LightGallery JS from cdnjs -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/1.8.1/js/lightgallery.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.12/jquery.validate.unobtrusive.min.js"></script>
    <!-- custom js-->
    <script src="~/js/script.js"></script>
    <script>
        function resetDatatable() {
            if ($.fn.DataTable.isDataTable(".datatable")) {
                debugger
                $(".datatable").DataTable().destroy(); // Destroy existing instance
                $('.datatable tbody').empty();
                $(".datatable tfoot").remove(); // Remove duplicate tfoot before reinitializing
            }
            //$('.datatable tbody').empty();
            //$('.datatable').DataTable().clear().destroy();
            
        }

        function bindDatatable() {
            $('.datatable').DataTable({
                "paging": true,
                "ordering": false,
                "info": true,
                "pageLength": 4,
                "autoWidth": false,
                "responsive": true,
                "language": {
                    "emptyTable": "<span style='font-size: 16px; font-weight: bold; color: #E6775A;'>No Records found!</span>"
                }
            });
        }
        function logout() {
            debugger;

            $.post("@Url.Action("Logout", "CodeGenLogin")").done(function () {
                // Remove JWT token from localStorage or sessionStorage
                document.cookie = ".AspNetCore.Cookies=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
                document.cookie = "Authorization=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
        localStorage.removeItem("jwtToken");
        sessionStorage.removeItem("jwtToken");

        // Redirect to login page after logout
                //@Url.Action("UserLogin", "CodeGenLogin")
                window.location.href = "@Url.Action("UserLogin", "CodeGenLogin")";
    });
        }

    </script>
</body>

</html>